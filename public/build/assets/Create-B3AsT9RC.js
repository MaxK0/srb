import{T as U,d as q,s as C,c as $,w as b,m as g,o as p,a as r,i as I,b as o,u as s,e as k,f as v,g as S,t as B,n as j,p as L,q as M}from"./app-BlvVrBEN.js";import{g as V,A as N}from"./AppLayout-yWdTq67O.js";import{_ as n}from"./InputLabel-BLj-ccaX.js";import{_ as t}from"./InputError-uvQIMCwL.js";import{_ as O}from"./PrimaryButton-Drh5wuWt.js";import{_ as d}from"./TextInput-_Znk-FFS.js";import{_ as E}from"./Checkbox-BdvFpNcJ.js";import{s as _}from"./index-BJ7OeXDr.js";import{s as f}from"./index-D4U8QGH7.js";import{s as w}from"./index-vCkSnwGd.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-ID1KrQnb.js";const A=m=>(L("data-v-80cca0bd"),m=m(),M(),m),F={class:"employees__create"},z={class:"container"},D={class:"form__blocks"},P={class:"form__block checkbox"},G={key:0,class:"form__blocks form__choose-user"},H={class:"form__block"},J=A(()=>r("p",null,"или",-1)),K={class:"form__block"},Q={key:1,class:"form__create-user"},R={class:"form__blocks"},W={class:"form__block"},X={class:"form__block"},Y={class:"form__block"},Z={class:"form__blocks"},ee={class:"form__block"},se={class:"form__block"},oe={class:"form__blocks"},le={class:"form__block"},ae={class:"form__block"},re={class:"form__blocks"},te={class:"form__block"},ne={class:"form__block"},ie={class:"form__blocks"},me={class:"form__block"},de={class:"form__block"},ue={__name:"Create",props:{branches:{type:Object,required:!0},positions:Object,sexes:{type:Object,required:!0},filter:{type:Object,required:!0}},setup(m){const u=m,e=U({branch:u.branches.find(i=>{var l;return i.id==((l=u.filter)==null?void 0:l.branchId)}),position:[],sex:[],phone:"",work_phone:"",email:"",name:"",lastname:"",patronymic:"",password:"",password_confirmation:"",find_user:!1}),c=q("Создать пользователя"),y=()=>{e.find_user?c.value="Найти пользователя":c.value="Создать сотрудника"},h=()=>{var l;const i=(l=e.branch)==null?void 0:l.id;i&&g.get(route("employees.create",{branch_id:i,user:u.user}))},x=()=>{e.find_user?e.post(route("users.find"),{onSuccess:i=>{i.props.user?g.get(route("users.hire",i.props.user.id)):e.errors.submit="Произошла ошибка"}}):e.post(route("employees.store"))};return C(()=>{e.branch==null&&V("branch_id")&&(e.branch=u.branches.find(i=>i.id==V("branch_id")),h())}),(i,l)=>(p(),$(N,{title:"Создать сотрудника"},{default:b(()=>[r("section",F,[r("div",z,[r("form",{class:"form",onSubmit:I(x,["prevent"])},[r("div",D,[r("div",P,[o(E,{checked:s(e).find_user,"onUpdate:checked":l[0]||(l[0]=a=>s(e).find_user=a),onChange:y,name:"find_user",id:"find_user"},null,8,["checked"]),o(n,{for:"find_user",value:"Найти пользователя"}),o(t,{message:s(e).errors.find_user},null,8,["message"])])]),s(e).find_user?(p(),k("div",G,[r("div",H,[o(n,{for:"phone",value:"Телефон"}),o(s(f),{id:"phone",class:"input",modelValue:s(e).phone,"onUpdate:modelValue":l[1]||(l[1]=a=>s(e).phone=a),autocomplete:"phone",mask:"+9 (999) 999 99-99",placeholder:"+9 (999) 999 99-99"},null,8,["modelValue"]),o(t,{message:s(e).errors.phone},null,8,["message"])]),J,r("div",K,[o(n,{for:"email",value:"Email"}),o(d,{id:"email",modelValue:s(e).email,"onUpdate:modelValue":l[2]||(l[2]=a=>s(e).email=a),type:"email",autocomplete:"email",placeholder:"ivan@gmail.com"},null,8,["modelValue"]),o(t,{message:s(e).errors.email},null,8,["message"])])])):v("",!0),s(e).find_user?v("",!0):(p(),k("div",Q,[r("div",R,[r("div",W,[o(n,{for:"branch",value:"Филиал"}),o(s(_),{id:"branch",modelValue:s(e).branch,"onUpdate:modelValue":l[3]||(l[3]=a=>s(e).branch=a),options:m.branches,filter:"",optionLabel:"title",placeholder:"Выберите филиал",class:"select",onChange:h},null,8,["modelValue","options"]),o(t,{message:s(e).errors.branch},null,8,["message"]),o(t,{message:s(e).errors.branch_id},null,8,["message"])]),r("div",X,[o(n,{for:"position",value:"Должность"}),o(s(_),{id:"position",modelValue:s(e).position,"onUpdate:modelValue":l[4]||(l[4]=a=>s(e).position=a),options:m.positions,filter:"",optionLabel:"title",placeholder:"Выберите должность",class:"select"},null,8,["modelValue","options"]),o(t,{message:s(e).errors.position},null,8,["message"]),o(t,{message:s(e).errors.position_id},null,8,["message"])])]),r("div",Y,[o(n,{for:"sex",value:"Пол"}),o(s(_),{id:"sex",modelValue:s(e).sex,"onUpdate:modelValue":l[5]||(l[5]=a=>s(e).sex=a),options:m.sexes,filter:"",optionLabel:"title",placeholder:"Выберите пол",class:"select"},null,8,["modelValue","options"]),o(t,{message:s(e).errors.sex},null,8,["message"]),o(t,{message:s(e).errors.sex_id},null,8,["message"])]),r("div",Z,[r("div",ee,[o(n,{for:"phone",value:"Телефон"}),o(s(f),{id:"phone",class:"input",modelValue:s(e).phone,"onUpdate:modelValue":l[6]||(l[6]=a=>s(e).phone=a),required:"",autocomplete:"phone",mask:"+9 (999) 999 99-99",placeholder:"+9 (999) 999 99-99"},null,8,["modelValue"]),o(t,{message:s(e).errors.phone},null,8,["message"])]),r("div",se,[o(n,{for:"work_phone",value:"Рабочий телефон"}),o(s(f),{id:"work_phone",class:"input",modelValue:s(e).work_phone,"onUpdate:modelValue":l[7]||(l[7]=a=>s(e).work_phone=a),autocomplete:"work_phone",mask:"+9 (999) 999 99-99",placeholder:"+9 (999) 999 99-99"},null,8,["modelValue"]),o(t,{message:s(e).errors.work_phone},null,8,["message"])])]),r("div",oe,[r("div",le,[o(n,{for:"email",value:"Email"}),o(d,{id:"email",modelValue:s(e).email,"onUpdate:modelValue":l[8]||(l[8]=a=>s(e).email=a),type:"email",required:"",autocomplete:"email",placeholder:"ivan@gmail.com"},null,8,["modelValue"]),o(t,{message:s(e).errors.email},null,8,["message"])]),r("div",ae,[o(n,{for:"name",value:"Имя"}),o(d,{id:"name",modelValue:s(e).name,"onUpdate:modelValue":l[9]||(l[9]=a=>s(e).name=a),type:"text",required:"",autocomplete:"name",placeholder:"Иван"},null,8,["modelValue"]),o(t,{message:s(e).errors.name},null,8,["message"])])]),r("div",re,[r("div",te,[o(n,{for:"lastname",value:"Фамилия"}),o(d,{id:"lastname",modelValue:s(e).lastname,"onUpdate:modelValue":l[10]||(l[10]=a=>s(e).lastname=a),type:"text",required:"",autocomplete:"lastname",placeholder:"Иванов"},null,8,["modelValue"]),o(t,{message:s(e).errors.lastname},null,8,["message"])]),r("div",ne,[o(n,{for:"patronymic",value:"Отчество"}),o(d,{id:"patronymic",modelValue:s(e).patronymic,"onUpdate:modelValue":l[11]||(l[11]=a=>s(e).patronymic=a),type:"text",autocomplete:"patronymic",placeholder:"Иванович"},null,8,["modelValue"]),o(t,{message:s(e).errors.patronymic},null,8,["message"])])]),r("div",ie,[r("div",me,[o(n,{for:"password",value:"Пароль"}),o(s(w),{id:"password",modelValue:s(e).password,"onUpdate:modelValue":l[12]||(l[12]=a=>s(e).password=a),toggleMask:"",feedback:!1,placeholder:"password"},null,8,["modelValue"]),o(t,{message:s(e).errors.password},null,8,["message"])]),r("div",de,[o(n,{for:"password_confirmation",value:"Повтор пароля"}),o(s(w),{id:"password_confirmation",modelValue:s(e).password_confirmation,"onUpdate:modelValue":l[13]||(l[13]=a=>s(e).password_confirmation=a),toggleMask:"",feedback:!1,placeholder:"password"},null,8,["modelValue"]),o(t,{message:s(e).errors.password_confirmation},null,8,["message"])])])])),o(t,{class:"-mb-14",message:s(e).errors.submit},null,8,["message"]),o(O,{class:j({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:b(()=>[S(B(c.value),1)]),_:1},8,["class","disabled"])],32)])])]),_:1}))}},xe=T(ue,[["__scopeId","data-v-80cca0bd"]]);export{xe as default};
